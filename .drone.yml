---
kind: template
load: docker_image.yaml
trigger:
  branch:
    - main
  event:
    - push
data:
  tags:
    - ${DRONE_BRANCH}
    - latest
---
kind: pipeline
name: tag_debug
type: docker
trigger:
  event:
    - tag
steps:
  - name: Debugging environment variables
    image: debian
    commands:
      - echo "${DRONE_TAG}"
      - echo "${DRONE_SEMVER_MAJOR}"
      - echo "${DRONE_SEMVER_MAJOR}.${DRONE_SEMVER_MINOR}"
      - echo "${DRONE_SEMVER}"

# kind: template
# load: docker_image.yaml
# trigger:
#   event:
#     - tag
# data:
#   tags:
#     - ${DRONE_TAG}
#     - ${DRONE_SEMVER_MAJOR}
#     - ${DRONE_SEMVER_MAJOR}.${DRONE_SEMVER_MINOR}
#     - ${DRONE_SEMVER}
#     - latest
